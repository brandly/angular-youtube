/*
  angular-youtube-mb v1.3.1
  https://github.com/brandly/angular-youtube-embed
*/
angular.module("youtube-embed",[]).service("youtubeEmbedUtils",["$window","$rootScope",function(e,r){function t(e,r){return e.indexOf(r)>-1}function a(){r.$apply(function(){n.ready=!0})}var n={},o=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\S*[^\w\s-])([\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,i=/t=(\d+)[ms]?(\d+)?s?/;return n.getIdFromURL=function(e){var r=e.replace(o,"$1");if(t(r,";")){var a=r.split(";");if(t(a[1],"%")){var n=decodeURIComponent(a[1]);r=("http://youtube.com"+n).replace(o,"$1")}else r=a[0]}else t(r,"#")&&(r=r.split("#")[0]);return r},n.getTimeFromURL=function(e){e=e||"";var r=e.match(i);if(!r)return 0;var a=r[0],n=r[1],o=r[2];return"undefined"!=typeof o?(o=parseInt(o,10),n=parseInt(n,10)):t(a,"m")?(n=parseInt(n,10),o=0):(o=parseInt(n,10),n=0),o+60*n},n.ready=!1,"undefined"==typeof YT?(e.onYouTubeIframeAPIReady=a,console.log("Unable to find YouTube iframe library on this page.")):YT.loaded?n.ready=!0:YT.ready(a),n}]).directive("youtubeVideo",["$window","youtubeEmbedUtils",function(e,r){var t=1,a={"-1":"unstarted",0:"ended",1:"playing",2:"paused",3:"buffering",5:"queued"},n="youtube.player.";return e.YTConfig={host:"https://www.youtube.com"},{restrict:"EA",scope:{videoId:"=?",videoUrl:"=?",player:"=?",playerVars:"=?",playerHeight:"=?",playerWidth:"=?"},link:function(e,o,i){function l(){var r=Array.prototype.slice.call(arguments);e.$apply(function(){e.$emit.apply(e,r)})}function y(r){var t=a[r.data];"undefined"!=typeof t&&l(n+t,e.player,r),e.$apply(function(){e.player.currentState=t})}function d(r){e.playerReady=!0,l(n+"ready",e.player,r)}function u(r){l(n+"error",e.player,r)}function p(){var r=angular.copy(e.playerVars);r.start=r.start||e.urlStartTime;var t=new YT.Player(f,{height:e.playerHeight,width:e.playerWidth,playerVars:r,events:{onReady:d,onStateChange:y,onError:u}});return t.id=f,t}function c(e){return void 0==e||null==e?!1:!0}function s(){e.player&&"function"==typeof e.player.destroy&&e.player.destroy(),e.player=p()}e.utils=r;var f=i.playerId||o[0].id||"unique-youtube-embed-id-"+t++;o[0].id=f,e.playerHeight=e.playerHeight||390,e.playerWidth=e.playerWidth||640,e.playerVars=e.playerVars||{},e.playerReady=!1,e.$watch(function(){return e.utils.ready},function(r){r&&!c(e.player)&&s()});var h=e.$watch(function(){return e.playerReady&&("undefined"!=typeof e.videoUrl||"undefined"!=typeof e.videoId||"undefined"!=typeof e.playerVars.list)},function(r){r&&(h(),c(e.videoUrl)?e.$watch("videoUrl",function(r){e.videoId=e.utils.getIdFromURL(r),e.urlStartTime=e.utils.getTimeFromURL(r),e.player.loadVideoByUrl(r)}):c(e.videoId)?e.$watch("videoId",function(r){e.player.loadVideoById(r)}):c(e.playerVars.list)?e.$watch("playerVars.list",function(){e.player.loadPlaylist(e.playerVars.list)}):e.player.stopVideo())});e.$watchCollection(["playerHeight","playerWidth"],function(){e.player&&e.player.setSize(e.playerWidth,e.playerHeight)}),e.$on("$destroy",function(){e.player&&e.player.destroy()})}}}]);